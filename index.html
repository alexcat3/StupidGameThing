<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hello World</title>
</head>
  <script src="pixi.min.js"></script>
<body>
  <script type="text/javascript">
   gameSpriteObjects = [];
    function gameSprite(texture,bar){
          console.log(this);
    console.log(this instanceof PIXI.Sprite);
      if(bar && bar.type == 'tiling'){
        if(bar.width && bar.height){
          console.log(this instanceof PIXI.Sprite);
          PIXI.extras.TilingSprite.call(this,texture,bar.width,bar.height);
        }else{
         console.log("Error: Width and height must be given for tiling sprites");
        }
       }
      PIXI.Sprite.call(this,texture);
      //X and Y Velocity
      this.vx=0;
      this.vy=0;
      this.loop = function(){ return; };
      gameSpriteObjects.push(this);
    };
    
    gameSprite.prototype = Object.create(PIXI.Sprite.prototype);
    gameSprite.prototype.constructor = gameSprite;
    gameSprite.prototype.loopTasks = function(){
      this.x += this.vx;
      this.y += this.vy;
      this.loop();
    };
    
   //Create the renderer
var renderer = PIXI.autoDetectRenderer(1024,512);
//Add the canvas to the HTML document
document.body.appendChild(renderer.view);
//Create a container object called the `stage`
var stage = new PIXI.Container();
   //Add game resources
    loader = PIXI.loader.add('Car.png').add('Road.png').load(setUp);
   
    //Once resources are loaded, setup the game
    function setUp(){  
      //Add car sprite
      car= new gameSprite(
        PIXI.loader.resources['Car.png'].texture
      );
      stage.addChild(car);
      //Add road
      road = new gameSprite(
          PIXI.loader.resources['Road.png'].texture,
          {type:'tiling',width:280,height:160}
        );
      road.vx = 3;
      //Start main loop
      gameLoop();
    }
    
    //This is called every frame
    function gameLoop(){
      //Call the loop functions of all game sprites
      gameSpriteObjects.map(function(obj){
        obj.loopTasks();
      });
      //Draw the stage
      renderer.render(stage);
      requestAnimationFrame(gameLoop);
    
    }
    
    
  </script>
</body>
</html>
