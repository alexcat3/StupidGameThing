<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hello World</title>
</head>
  <script src="pixi.min.js"></script>
<body>
  <script type="text/javascript">
   gameSpriteObjects = [];
    function gameSprite(texture){
      PIXI.Sprite.call(this,texture);
      //X and Y Velocity
      this.vx=0;
      this.vy=0;
      this.loop = function(){ return; };
      gameSpriteObjects.push(this);
    };
    gameSprite.prototype = Object.create(PIXI.Sprite.prototype);
    gameSprite.prototype.constructor = gameSprite;
    gameSprite.prototype.loopTasks = function(){
      this.x += this.vx;
      this.y += this.vy;
      this.loop();
    };
    function tilingGameSprite(texture,width,height){
      PIXI.extras.TilingSprite.call(this,texture,width,height);
      this.vx=0;
      this.vy=0;
      this.loop=function(){return;}
      gameSpriteObjects.push(this);
    }tilingGameSprite.prototype = Object.create(PIXI.extras.TilingSprite.prototype);
    tilingGameSprite.prototype.constructor = tilingGameSprite;
    tilingGameSprite.prototype.loopTasks = function(){
      this.tilePosition.x+=this.vx;
    }
    
   //Create the renderer
var renderer = PIXI.autoDetectRenderer(1024,512);
//Add the canvas to the HTML document
document.body.appendChild(renderer.view);
//Create a container object called the `stage`
var stage = new PIXI.Container();
   //Add game resources
    loader = PIXI.loader.add('Car.png').add('Road.png').add('sheep.png').load(setUp);
   
    //Once resources are loaded, setup the game
    function setUp(){  
       //Add road
      road = new tilingGameSprite(
          PIXI.loader.resources['Road.png'].texture,
        1024,150
        );
      road.y=200;
      road.vx = -3;
      stage.addChild(road);
      
      //Add car sprite
      car= new gameSprite(
        PIXI.loader.resources['Car.png'].texture
      );
      car.y=200;
      stage.addChild(car);
    
      //Start main loop
      gameLoop();
    }
    
    //This is called every frame
    function gameLoop(){
      //Call the loop functions of all game sprites
      gameSpriteObjects.map(function(obj){
        obj.loopTasks();
      });
      
      if(Math.floor(Math.random*60)==0){
        var sheep = new gameSprite(PIXI.loader.resources['sheep.png'].texture)
        sheep.y=Math.floor(Math.Random*100)
        road.addChild(sheep);
      }
      
      //Draw the stage
      renderer.render(stage);
      requestAnimationFrame(gameLoop);
    
    }
    
    
  </script>
</body>
</html>
